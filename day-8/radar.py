import math
import time


def get_matrix(area: str):
    return list(map(lambda line: list(line), area.split("\n")))


def render_matrix(matrix):
    return "\n".join(["".join(line) for line in matrix])


def clear_screen():
    print("\033[H\033[2J")


def plot_line(matrix, x, y, angle):
    for i in range(1, len(matrix) * 2):
        lx = round(x + (i * math.sin(math.radians(angle))))
        ly = round(y - (i * math.cos(math.radians(angle))))

        if lx > -1 and lx < len(matrix[0]):
            if ly > -1 and ly < len(matrix):
                matrix[ly][lx] = "*"

    return matrix


area = """
................................................
................................................
................................................
................................................
................................................
...........O....................................
................................................
............O...................................
................................................
.............#..................................
................................................
................................................
................................................
................................................
................................................
................................................
................................................
................................................
................................................
................................................
................................................
................................................
................................................
................................................
""".strip()


def main():
    x, y = 11, 5

    while True:
        for angle in range(0, 360, 1):
            print(f"Angle: {str(angle)}")
            matrix = plot_line(get_matrix(area), x, y, angle)
            print(render_matrix(matrix))
            time.sleep(0.01)
            clear_screen()


if __name__ == "__main__":
    main()
